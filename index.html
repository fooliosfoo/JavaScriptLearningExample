<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<script src="timer.js"></script>
<link rel="icon" 
  type="image/png" 
  href="icon.png">
<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
<meta name="viewport" content="initial-scale=1, maximum-scale=1"> 
<link rel="stylesheet" type="text/css" href="tstyle.css">
<style>
body {
  width: 300px;
  height: 500px;
  margin: 0px auto;
  padding: 10px;
  font: 10pt/1.5em Helvetica,"Helvetica neue", Arial, sans-serif;
  border-style:solid;
  border-width:2px;
}
</style>
<script>
if ('serviceWorker' in navigator) {
  console.log('CLIENT: service worker registration in progress.');
  navigator.serviceWorker.register('https://github.com/fooliosfoo/timer/sw.js').then(function() {
    console.log('CLIENT: service worker registration complete.');
  }, function() {
    console.log('CLIENT: service worker registration failure.');
  });
} else {
  console.log('CLIENT: service worker is not supported.');
}
</script>
</head>
<body>
<h1><p>Watt Load Check</p></h1>
<h2><pre>1PH 1S/2S Kh <input type="text" autofocus size="3" maxlength="3" id="khVal" name="kh" class="khtxtbx" value="1.0" onchange = "khFunction();" onkeypress = "this.onchange();" oninput    = "this.onchange();">
</pre></h2>
<hr />
<button onClick="PlseTimer = setInterval(myCounter, 1000)" id="StrtBttn" style="height:66px; width:100%; background-color: white; color: green; font-size: 20px;">Start Timer</button>
<button onClick="RstTmeCntr()" id="StpBttn" style="height:160px; width:100%; background-color: white; color: green; font-size: 20px;">Stop Timer</button>
<p><span id="TimeCntr">0</span> Seconds</p>
<form id="frm1" action="">
# of Widgets: <input type="text" autofocus size="3" maxlength="3" id="widgets" name="w" value="" onchange = "wattsFunction();" onkeypress = "this.onchange();" oninput    = "this.onchange();">
<br>
# of Seconds: <input type="text" size="2" maxlength="2" id="seconds" name="s" value="0" onchange = "wattsFunction();" onkeypress = "this.onchange();" oninput    = "this.onchange();" readonly>
</form> 
<p id="testResult"></p>
<p id="amperage1s"></p>
<p id="amperage"></p>
<p id="cautionTag"></p>
<script>
var post = document.getElementById('StrtBttn');
var StpBttnPst = document.getElementById('StpBttn');
StpBttnPst.style.display = 'none';
</script>
</body>
</html>

# of Seconds: <input type="text" size="2" maxlength="2" id="seconds" name="s" value="0" onchange = "wattsFunction();" onkeypress = "this.onchange();" oninput    = "this.onchange();" readonly>
</form> 
<p id="testResult"></p>
<p id="amperage1s"></p>
<p id="amperage"></p>
<p id="cautionTag"></p>
<script>
var post = document.getElementById('StrtBttn');
var StpBttnPst = document.getElementById('StpBttn');
StpBttnPst.style.display = 'none';
	
var c = 0;
function myCounter() {
  RstLbls();
  document.getElementById("TimeCntr").innerHTML = ++c;
  document.getElementById("widgets").value = "";
  post.style.display = 'none';
  StpBttnPst.style.display = 'block';
}
  function RstTmeCntr() {
  clearInterval(PlseTimer);   
  document.getElementById("seconds").value = document.getElementById("TimeCntr").innerHTML;
  document.getElementById("TimeCntr").innerHTML = "0";
  c = 0;
  post.style.display = 'block';
  StpBttnPst.style.display = 'none';
}
function RstLbls() {
  document.getElementById("widgets").value = "";
  document.getElementById("testResult").innerHTML = "";
  document.getElementById("cautionTag").innerHTML = "";
  document.getElementById("amperage1s").innerHTML= "";
  document.getElementById("amperage").innerHTML= "";
  document.getElementById("seconds").value = "0";
}
  function wattsFunction(){
  var x = document.getElementById("widgets").value;
  var y = document.getElementById("seconds").value;
  var k = document.getElementById("khVal").value;
  var result = "";
  var results = "";
  var time_widgets = 3600 * x * k;
  var results = time_widgets / y;
  var result = round(results, 2);
  //result = Math.round((time_widgets / y) * 100) / 100  //returns 00.00
  //result = parsefloat((time_widgets / y).toFixed(2));  //Breaks Code
  wattCnv = result / 1000;
  kw = wattCnv.toFixed(2);
  document.getElementById("testResult").innerHTML=result + " Watts = " + kw + " KW";
  dangerous=(result>4680)?"High":"Low";
  document.getElementById("cautionTag").innerHTML=dangerous;
  amps1s = (result / 120).toFixed(2);
  document.getElementById("amperage1s").innerHTML=amps1s + " AMPS @ 120V";
  amps2s = (result / 240).toFixed(2);
  document.getElementById("amperage").innerHTML=amps2s + " AMPS @ 240V";
}
  function timeLoad(){
  var secDelay = document.getElementById("seconds").value * 1000;
  setTimeout(function(){playBeep()},secDelay);
  var secCntDwn = document.getElementById("seconds").value;
  var myVar=setInterval(function(){myTimer()},1000);
}
function myTimer(){
  secCntDwn=secCntDwn - 1;
  document.getElementById("CountDown").innerHTML=secCntDwn + " Seconds Left";
}
function playBeep(){
  secCntDwn=secCntDwn - 1;
  document.getElementById("CountDown").innerHTML=secCntDwn + " Seconds Left";
  clearInterval(myVar);
}
function round(value, decimals) {
  return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
}
function khFunction() {
  RstLbls();
}
	
</script>

 
 <!--BEGIN CALCULATOR-------------------------------------------------------------------------- -->
<!-- <div style="border-radius:12px; border:1px solid silver; background:#ccd9ff; margin:15px"> -->
<FORM ACTION="/electricity/" METHOD=POST name=calculator id=calculator>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=8>
<TR>
<TD>

<!--<H2 align=center style="font-family:Tahoma,Arial; color:#060">Calculate your electric cost</H2>-->

	<TABLE BORDER=0 CELLSPACING=1 CELLPADDING=5 style="font:11px Arial" align=center>
	<TR>
	<TD VALIGN=top style="border-right:1px solid gray" align=center>
	<B>Device / Wattage</B> <span style="font-size:10px">(wH/hr)</span>

<!-- <br><SELECT NAME=watts onchange="calculate()"> -->
<SELECT NAME=watts id=wattsField onchange="theVal=this.options[this.selectedIndex].value; if (theVal=='cost') window.location='cost.html'; else if (theVal=='other') chooseCustom('How much are you paying, in cents per kWh? (check your bill)','15',this.id,lastRate); else {lastRate=this.selectedIndex; calculate();}">
<script>document.getElementById('kwVal').value = kw;</script>
<OPTION VALUE="kwVal">------
<OPTION VALUE=other>Enter Watts
</SELECT></P>
</TD>
<TD VALIGN=top>
<p align=center><B>Amount used per day</B>

<br><SELECT NAME=hours onchange="calculate()">
<OPTION VALUE="0.0167">1 minute/day
<OPTION VALUE="0.0833">5 minutes/day
<OPTION VALUE="0.25">15 minutes/day
<OPTION VALUE="0.50">30 minutes/day
<OPTION VALUE=1>1 hr./day
<OPTION VALUE=2>2 hrs./day
<OPTION VALUE=3>3 hrs./day
<OPTION VALUE=4>4 hrs./day
<OPTION VALUE=5>5 hrs./day
<OPTION VALUE=6>6 hrs./day
<OPTION VALUE=7>7 hrs./day
<OPTION VALUE=8>8 hrs./day
<OPTION VALUE=9>9 hrs./day
<OPTION VALUE=10>10 hrs./day
<OPTION VALUE=11>11 hrs./day
<OPTION VALUE=12>12 hrs./day
<OPTION VALUE=13>13 hrs./day
<OPTION VALUE=14>14 hrs./day
<OPTION VALUE=15>15 hrs./day
<OPTION VALUE=16>16 hrs./day
<OPTION VALUE=17>17 hrs./day
<OPTION VALUE=18>18 hrs./day
<OPTION VALUE=19>19 hrs./day
<OPTION VALUE=20>20 hrs./day
<OPTION VALUE=21>21 hrs./day
<OPTION VALUE=22>22 hrs./day
<OPTION VALUE=23>23 hrs./day
<OPTION VALUE=24 SELECTED>24 hrs./day
</SELECT></P>
</TD>
</TR>
<TR>
<TD style="border-right:1px solid gray">

<p align=center><B>Cost of Electricity (per kWh)</B>

<br>
<SELECT NAME=rate id=rateField onchange="theVal=this.options[this.selectedIndex].value; if (theVal=='cost') window.location='cost.html'; else if (theVal=='other') chooseCustom('How much are you paying, in cents per kWh? (check your bill)','15',this.id,lastRate); else {lastRate=this.selectedIndex; calculate();}">
<!--<OPTION>CHECK YOUR OWN ELECTRIC BILL
<OPTION>TO FIND YOUR HIGHEST kWh RATE.
<OPTION>---------------------------
<OPTION value=cost>(Choose me for more on rates)
<OPTION>--------------------------- -->
<OPTION VALUE=20>20&#162;
<OPTION VALUE=19>19&#162;
<OPTION VALUE=18>18&#162;
<OPTION VALUE=17>17&#162;
<OPTION VALUE=16>16&#162;
<!--<OPTION VALUE=16 SELECTED>16&#162;-->
<OPTION VALUE=15>15&#162;
<OPTION VALUE=14>14&#162;
<OPTION VALUE=13 SELECTED>13&#162;
<OPTION VALUE=12>12&#162;
<OPTION VALUE=11>11&#162;
<OPTION VALUE=10>10&#162;
<!--<OPTION VALUE=9> 9&#162;
<OPTION VALUE=8> 8&#162;
<OPTION VALUE=7> 7&#162;
<OPTION VALUE=6> 6&#162;
<OPTION VALUE=5> 5&#162;-->
<OPTION VALUE=other>other... (enter your own rate...)

</select>

</P>
</TD>
<TD>
<p align=center><B>Days used per month</B>

<br><SELECT NAME=days onchange="calculate()">
<OPTION VALUE=1>1
<OPTION VALUE=2>2
<OPTION VALUE=3>3
<OPTION VALUE=4>4
<OPTION VALUE=5>5
<OPTION VALUE=6>6
<OPTION VALUE=7>7
<OPTION VALUE=8>8
<OPTION VALUE=9>9
<OPTION VALUE=10>10
<OPTION VALUE=11>11
<OPTION VALUE=12>12
<OPTION VALUE=13>13
<OPTION VALUE=14>14
<OPTION VALUE=15>15
<OPTION VALUE=16>16
<OPTION VALUE=17>17
<OPTION VALUE=18>18
<OPTION VALUE=19>19
<OPTION VALUE=20>20
<OPTION VALUE=21>21
<OPTION VALUE=22>22
<OPTION VALUE=23>23
<OPTION VALUE=24>24
<OPTION VALUE=25>25
<OPTION VALUE=26>26
<OPTION VALUE=27>27
<OPTION VALUE=28>28
<OPTION VALUE=29>29
<OPTION VALUE=30>30
<OPTION VALUE=31 SELECTED>31
<!-- <OPTION VALUE="30.4375">30.4375 -->
</SELECT></P>
</TD>
</TR>
</TABLE>
    
&nbsp;

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=8>
<TR>
<TD VALIGN=top>
	<TABLE BORDER=0 style="font:11px Arial; border:2px solid navy">
	<TR>
		<TD ALIGN=right>Kilowatt Hours used:</TD>
		<TD><INPUT TYPE=text NAME=kwh VALUE="" SIZE=5 readonly>kWh/mo.</TD>
	</TR>
	<TR>
		<TD style="border-top:1px solid gray; border-bottom:1px solid gray" align=right><B>Cost per month:</B></TD>
		<TD style="border-top:1px solid gray; border-bottom:1px solid gray">$<INPUT TYPE=text NAME=costpermonth VALUE="" SIZE=5 readonly></TD>
	</TR>
	<TR>
		<TD ALIGN=right>Cost per year:</TD>
		<TD>$<INPUT TYPE=text NAME=costperyear VALUE="" SIZE=5 readonly></TD>
	</TR>
	</TABLE>
</TD>

<TD VALIGN=top style="font:10px Arial" width=240>
<P><B>Estimate Usage</B>
<br>(1) Your <i>particular</i> computer, TV, etc. could use more or less energy than the <i>samples</i> listed here.
<br>(2) Some things use more or less energy based on how high you crank them (e.g. ovens, stereos).
<br>(3) Choose the <i>rate</i> that you're utility is charging you in Cents/KWHour. <B>NIPSCO($0.13/KWHour)</B>
</P>
</TD>
</TR>
</TABLE>
</div>
    
<script>
lastRate=12;
calculate();

function calculate() {
watts = document.calculator.watts.value;
hours = document.calculator.hours.value;
days = document.calculator.days.value;
rate = document.calculator.rate.value;

if (watts=='laundry') {
	coldPrice = (0.256 * rate /100).toFixed(2);
	hotPrice = ((0.256+2.5774)*rate /100).toFixed(2);
	answer=confirm("Cost per load for electric is $" +coldPrice+ " to ~$" +hotPrice+ " depending on whether you use cold or hot water.\n\nClick [OK] to go to the special Laundry Costs Calculator (or [Cancel] to stay on this page).");
	if (answer) { document.calculator.watts.selectedIndex=3; window.location='laundry.html'; return;}
}
else if (watts=='dryer') {
	price = (3.3 * rate /100).toFixed(2);
	priceYr = Math.round(3.3 * rate * 392 /100);
	answer=confirm("Cost PER LOAD is $" +price+ " (~$" +priceYr+ "/year).  Hang your clothes up to dry and save ALL of this cost.\n\nClick [OK] to go straight to the Clothes Dryers page for more on dryer costs (or [Cancel] to stay on this page).");
	if (answer) { document.calculator.watts.selectedIndex=3; window.location='dryers.html'; return;}
}

kwh = watts/1000 * hours * days;
if (kwh>20) { kwh=Math.round(kwh);}
else { kwh = Math.round(kwh*10)/10;}

	costpermonth = formatDecimal(kwh*rate/100);
	costperyear = formatDecimal(costpermonth*12);

	document.calculator.kwh.value=kwh;
	document.calculator.costpermonth.value = costpermonth;
	document.calculator.costperyear.value = costperyear;
}

function formatDecimal(val) { // Only if amount <20, else rounded.
	val = Math.round(val*100)/100;
	if (val<20 && Math.floor(val) !=val)
		return val.toFixed(2);
	else return Math.round(val);
}

function chooseCustom(message,theDefault,field,previousValue) {
	answer=prompt(message,theDefault);
	answer.replace(/[^0-9]/,'');
	theField = document.getElementById(field);

	if (answer) {
		length = theField.options.length;
		theField.options[length] = new Option(answer,answer);
		theField.selectedIndex=length;
		calculate();
	}
	else { theField.selectedIndex = previousValue;}
}    
</script>
    
<!--    
END-->
 
</body>
</html>
